<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Insight Crawler</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5rem;
            font-weight: 300;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .url-input {
            width: 100%;
            padding: 20px 20px 20px 50px;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .url-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .url-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #a0aec0;
            font-size: 1.2rem;
        }

        .analyze-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-container {
            margin-top: 30px;
            display: none;
        }

        .result-content {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid #667eea;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .error {
            background: #fed7d7;
            border-left-color: #e53e3e;
            color: #c53030;
        }

        .success {
            background: #c6f6d5;
            border-left-color: #38a169;
            color: #2f855a;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            overflow: hidden;
            margin: 20px 0;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-text {
            text-align: center;
            color: #718096;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #e2e8f0;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1rem;
            font-weight: 600;
            color: #718096;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-btn:hover {
            color: #667eea;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* About Content */
        .about-content {
            max-width: 100%;
        }

        .about-content h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .about-content h3 {
            color: #4a5568;
            margin: 30px 0 20px 0;
            font-size: 1.4rem;
        }

        .about-description {
            color: #718096;
            line-height: 1.6;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* Workflow Steps */
        .workflow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            text-align: center;
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            line-height: 40px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .step h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .step p {
            color: #718096;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Technology Grid */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .tech-category {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .tech-category h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        .tech-category ul {
            list-style: none;
            padding: 0;
        }

        .tech-category li {
            color: #718096;
            margin-bottom: 8px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .tech-category strong {
            color: #4a5568;
        }

        /* Use Cases */
        .use-cases {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .use-case {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .use-case .icon {
            font-size: 2rem;
            margin-bottom: 15px;
            display: block;
        }

        .use-case h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .use-case p {
            color: #718096;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* About Footer */
        .about-footer {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-top: 30px;
            border-left: 4px solid #38a169;
        }

        .about-footer p {
            color: #4a5568;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .about-footer strong {
            color: #2d3748;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid #e2e8f0;
            padding: 15px 0;
            text-align: center;
            z-index: 100;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer p {
            color: #718096;
            font-size: 0.9rem;
            margin: 0;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            color: #764ba2;
        }

        /* Adjust container to account for footer */
        body {
            padding-bottom: 80px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .url-input {
                padding: 15px 15px 15px 45px;
                font-size: 1rem;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .tab-btn {
                text-align: center;
                border-bottom: 1px solid #e2e8f0;
            }

            .workflow, .tech-grid, .use-cases {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 Market Insight Crawler</h1>
        <p class="subtitle">Intelligent website analysis with AI</p>
        
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="analyzer">Analyzer</button>
            <button class="tab-btn" data-tab="about">About</button>
        </div>

        <!-- Analyzer Tab -->
        <div class="tab-content active" id="analyzer-tab">
            <form id="analyzeForm">
                <div class="form-group">
                    <div class="input-group">
                        <span class="url-icon">🌐</span>
                        <input 
                            type="url" 
                            id="urlInput" 
                            class="url-input" 
                            placeholder="Enter the website URL (ex: example.com)"
                            required
                        >
                    </div>
                </div>
                
                <button type="submit" id="analyzeBtn" class="analyze-btn">
                    🚀 Analyze Website
                </button>
            </form>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing website...</p>
            </div>

            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="status-text" id="statusText"></div>

            <div class="result-container" id="resultContainer">
                <div class="result-content" id="resultContent"></div>
            </div>
        </div>

        <!-- About Tab -->
        <div class="tab-content" id="about-tab">
            <div class="about-content">
                <h2>🤖 About This Project</h2>
                <p class="about-description">
                    Market Insight Crawler is a Python-based tool that simulates AI agent behavior using simple LLM calls, 
                    without complex frameworks like LangChain or AutoGen. It demonstrates how thoughtful prompt design and 
                    modular thinking can create intelligent applications.
                </p>

                <h3>🎯 How It Works</h3>
                <div class="workflow">
                    <div class="step">
                        <span class="step-number">1</span>
                        <h4>Web Scraping</h4>
                        <p>Extracts content and links from the target website</p>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <h4>Link Classification</h4>
                        <p>LLM analyzes and filters relevant internal links</p>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <h4>Content Aggregation</h4>
                        <p>Collects and processes content from relevant pages</p>
                    </div>
                    <div class="step">
                        <span class="step-number">4</span>
                        <h4>Business Summary</h4>
                        <p>Generates structured analysis in Markdown format</p>
                    </div>
                </div>

                <h3>🛠️ Technologies Used</h3>
                <div class="tech-grid">
                    <div class="tech-category">
                        <h4>Backend</h4>
                        <ul>
                            <li><strong>Python 3.10+</strong> - Core language</li>
                            <li><strong>Flask</strong> - Web framework</li>
                            <li><strong>BeautifulSoup4</strong> - Web scraping</li>
                            <li><strong>Requests</strong> - HTTP client</li>
                        </ul>
                    </div>
                    <div class="tech-category">
                        <h4>AI & LLMs</h4>
                        <ul>
                            <li><strong>OpenAI API</strong> - GPT-4 integration</li>
                            <li><strong>Google Gemini</strong> - Alternative LLM</li>
                            <li><strong>Streaming</strong> - Real-time responses</li>
                        </ul>
                    </div>
                    <div class="tech-category">
                        <h4>Frontend</h4>
                        <ul>
                            <li><strong>HTML5/CSS3</strong> - Modern interface</li>
                            <li><strong>JavaScript</strong> - Interactive features</li>
                            <li><strong>Glass-morphism</strong> - Visual design</li>
                        </ul>
                    </div>
                    <div class="tech-category">
                        <h4>Features</h4>
                        <ul>
                            <li><strong>Real-time streaming</strong> - Live analysis</li>
                            <li><strong>Responsive design</strong> - Mobile-friendly</li>
                            <li><strong>Error handling</strong> - Robust UX</li>
                        </ul>
                    </div>
                </div>

                <h3>💡 Use Cases</h3>
                <div class="use-cases">
                    <div class="use-case">
                        <span class="icon">💼</span>
                        <h4>Sales Intelligence</h4>
                        <p>Research potential clients and understand their business</p>
                    </div>
                    <div class="use-case">
                        <span class="icon">📊</span>
                        <h4>Market Analysis</h4>
                        <p>Study competitors and market positioning</p>
                    </div>
                    <div class="use-case">
                        <span class="icon">🚀</span>
                        <h4>Business Development</h4>
                        <p>Identify partnership and integration opportunities</p>
                    </div>
                    <div class="use-case">
                        <span class="icon">📈</span>
                        <h4>CRM Enrichment</h4>
                        <p>Automatically gather company information</p>
                    </div>
                </div>

                <div class="about-footer">
                    <p><strong>Open Source:</strong> This project is available on <a href="https://github.com/alexguimenti/market-insight-crawler" target="_blank" rel="noopener noreferrer">GitHub</a> for learning and adaptation.</p>
                    <p><strong>Educational:</strong> Demonstrates AI agent simulation without complex frameworks.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Created by <a href="https://www.linkedin.com/in/alexandre-guimenti/" target="_blank" rel="noopener noreferrer">Alexandre Guimenti</a></p>
        </div>
    </footer>

    <script>
        const form = document.getElementById('analyzeForm');
        const urlInput = document.getElementById('urlInput');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const loading = document.getElementById('loading');
        const resultContainer = document.getElementById('resultContainer');
        const resultContent = document.getElementById('resultContent');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const statusText = document.getElementById('statusText');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const url = urlInput.value.trim();
            if (!url) return;

            // Reset UI
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = '⏳ Analyzing...';
            loading.style.display = 'block';
            resultContainer.style.display = 'none';
            progressBar.style.display = 'block';
            statusText.textContent = 'Starting analysis...';

            try {
                const response = await fetch('/analyze_stream', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url: url })
                });

                if (!response.ok) {
                    throw new Error('Erro na requisição');
                }

                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let result = '';

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;

                    const chunk = decoder.decode(value);
                    const lines = chunk.split('\n');

                    for (const line of lines) {
                        if (line.startsWith('data: ')) {
                            try {
                                const data = JSON.parse(line.slice(6));
                                
                                if (data.error) {
                                    showError(data.error);
                                    return;
                                }
                                
                                if (data.result) {
                                    result = data.result;
                                    showResult(result);
                                    return;
                                }
                            } catch (e) {
                                console.error('Erro ao processar dados:', e);
                            }
                        }
                    }
                }

            } catch (error) {
                showError('Error connecting to server: ' + error.message);
            } finally {
                resetUI();
            }
        });

        function showResult(content) {
            resultContent.textContent = content;
            resultContent.className = 'result-content success';
            resultContainer.style.display = 'block';
            statusText.textContent = 'Analysis completed successfully!';
        }

        function showError(message) {
            resultContent.textContent = 'Error: ' + message;
            resultContent.className = 'result-content error';
            resultContainer.style.display = 'block';
            statusText.textContent = 'Analysis error';
        }

        function resetUI() {
            analyzeBtn.disabled = false;
            analyzeBtn.textContent = '🚀 Analyze Website';
            loading.style.display = 'none';
            progressBar.style.display = 'none';
        }

        // Tab functionality
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetTab = btn.getAttribute('data-tab');
                
                // Remove active class from all buttons and contents
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked button and corresponding content
                btn.classList.add('active');
                document.getElementById(targetTab + '-tab').classList.add('active');
            });
        });

        // Auto-focus on input
        urlInput.focus();

        // Automatically add https:// if not provided
        urlInput.addEventListener('blur', function() {
            let url = this.value.trim();
            if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
                this.value = 'https://' + url;
            }
        });
    </script>
</body>
</html> 